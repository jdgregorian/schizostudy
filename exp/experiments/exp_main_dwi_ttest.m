% Script for testing main settings of classifiers on DWI dataset with
% 154 subjects with dimension reduced by ttest with 0.0001, 0.0005, 0.001, 
% 0.005, 0.01, 0.05 significance levels in cross-validation loop.
% Leave-two-out method is used.

% initialization
expfolder = fullfile('exp', 'experiments');
setfolder = fullfile('exp', 'settings');

% datafiles
DWI154sub = fullfile('data', 'data_DWI_154subjects.mat');

% main settings
mainSettings = fullfile(setfolder, 'mainSettings.m');

% additional settings
ltoSet = ['settings.crossval = ''lto'';',...
          'settings.pairing = [1:77, 1:77];'];
ttest0001 = [ltoSet,...
           'settings.dimReduction.name = ''ttest'';',...
           'settings.dimReduction.inloop = true;',...
           'settings.dimReduction.alpha = 0.0001;'];
ttest0005 = [ltoSet,...
           'settings.dimReduction.name = ''ttest'';',...
           'settings.dimReduction.inloop = true;',...
           'settings.dimReduction.alpha = 0.0005;'];
ttest001 = [ltoSet,...
           'settings.dimReduction.name = ''ttest'';',...
           'settings.dimReduction.inloop = true;',...
           'settings.dimReduction.alpha = 0.001;'];
ttest005 = [ltoSet,...
           'settings.dimReduction.name = ''ttest'';',...
           'settings.dimReduction.inloop = true;',...
           'settings.dimReduction.alpha = 0.005;'];
ttest01 = [ltoSet,...
           'settings.dimReduction.name = ''ttest'';',...
           'settings.dimReduction.inloop = true;',...
           'settings.dimReduction.alpha = 0.01;'];
ttest05 = [ltoSet,...
           'settings.dimReduction.name = ''ttest'';',...
           'settings.dimReduction.inloop = true;',...
           'settings.dimReduction.alpha = 0.05;'];

% summary
settingFiles = {mainSettings};
data = {DWI154sub};
additionalSettings = {ttest0001, ttest0005, ttest001, ttest005, ttest01, ttest05};
expname = 'exp_main_dwi_ttest';

% running experiment
runExperiment(settingFiles, data, expname, additionalSettings)

% final results listing
listSettingsResults(fullfile(expfolder, expname));